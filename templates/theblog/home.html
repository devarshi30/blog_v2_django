{% extends 'base.html' %}

{% block content %}

<h1>Posts</h1>
<div class="album">
	<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
		<!-- This for loop is to fatch all the data reated to post -->
		{% for post in object_list %}
		<div class="col">
			<div class="card shadow-sm">

				<!-- head image -->
				<img class="bd-placeholder-img card-img-top" width="100%" height="225"
					src="{{ post.header_image.url }}">

				<div class="card-body">

					<!-- Aarticle title -->
					<h5>
						<a class="text-decoration-none" href="{% url 'article-detail' post.pk %}">{{ post.title }}</a>
					</h5>

					<!-- Fatching author name -->
					<h6>
						Author - <span style="color: #660066;">
							{{ post.author.first_name }} {{ post.author.last_name }}</h6>
					</span>

					<!-- A small description -->
					<p class="card-text">{{ post.snippet }}</p>
					<div class="d-flex justify-content-between align-items-center">

						<!-- checking authenticated user for edit and delete button -->
						{% if user.is_authenticated %}						
							<!-- If user is authenticated then this loop will execute -->
							{% if user.id == post.author.id %}
							<div class="btn-group">
								<a role="button" href="{% url 'update_post' post.pk %}"
									class="btn btn-sm btn-outline-warning">Edit</a>
								<a role="button" href="{% url 'delete_post' post.pk %}"
									class="btn btn-sm btn-outline-danger">Detele</a>
							</div>
							{% endif %}
						{% endif %}
						
						<!-- Printing date -->
						<small class="text-muted">{{ post.post_date }}</small>

						<!-- Printing category -->
						<small class="text-success fw-bolder">{{ post.category }}</small>
					</div>
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
</div>
{% endblock %}